javascript:(async()=>{const d=document.createElement('div');d.style.cssText='position:fixed;bottom:0;left:0;width:50%;height:50vh;max-height:70%;overflow-y:auto;background-color:#fff;color:#333;padding:20px;box-shadow:0 5px 15px rgba(0,0,0,0.2);border-radius:10px;font-family:"Segoe UI",Tahoma,Geneva,Verdana,sans-serif;z-index:9999;resize:both;cursor:move';document.body.appendChild(d);const h=document.createElement('div');h.style.cssText='background-color:#007bff;color:white;padding:15px;border-radius:10px 10px 0 0;font-size:18px;font-weight:bold;text-align:center;cursor:move';h.textContent='Scanning Progress';d.appendChild(h);const ic=document.createElement('div');ic.style.cssText='margin-top:15px;display:flex;gap:10px';const si=document.createElement('input');si.type='text';si.placeholder='Search for resources...';si.style.cssText='padding:10px;font-size:14px;border-radius:8px;border:1px solid #ddd;width:48%;box-sizing:border-box';const ei=document.createElement('input');ei.type='text';ei.placeholder='Exclude words...';ei.style.cssText='padding:10px;font-size:14px;border-radius:8px;border:1px solid #ddd;width:48%;box-sizing:border-box';ic.appendChild(si);ic.appendChild(ei);d.appendChild(ic);const cd=document.createElement('div');cd.style.cssText='padding:20px;text-align:left';cd.innerHTML=`<p style="font-size:16px;color:#007bff;">Scanning in Progress...</p><p style="font-size:14px;color:#555;">Please wait while we scan the page for unique resources.</p>`;d.appendChild(cd);let up=[],vr=new Set();const fc=async(url)=>{try{const res=await fetch(url);return res.ok?await res.text():null;}catch(e){console.error(`Error fetching ${url}:`,e);return null;}};const isv=url=>(url.startsWith("/")||url.startsWith("./")||url.startsWith("../"))&&!url.includes(" ")&&!/[^\x20-\x7E]/.test(url)&&url.length>1&&url.length<200;const xu=content=>[...content.matchAll(/['"]((?:\/|\.\.\/|\.\/)[^'"]+)['"]/g)].map(m=>m[1]).filter(isv);const pr=async(url)=>{if(vr.has(url))return;vr.add(url);console.log(`Fetching and processing: ${url}`);const content=await fc(url);if(content){const foundUrls=xu(content);up.push(...foundUrls);}};const res=performance.getEntriesByType("resource").map(e=>e.name);for(const r of res){await pr(r);}const fup=[...new Set(up)];console.log("Final list of unique paths:",fup);console.log("All scanned resources:",Array.from(vr));cd.innerHTML=`<ul style="list-style:none;padding:0;font-size:14px;line-height:1.8;">${fup.map(p=>`<li class="scanning-list-item">${p}</li>`).join('')}</ul><p style="color:#555;">Use the search and exclude fields above to filter the resources.</p>`;const updateUrlCount=(filteredResults)=>{ucd.textContent=`${filteredResults.length} URL(s) available`;};let filteredResults=[...fup];const fl=()=>{const iw=si.value.trim().toLowerCase().split(' ').filter(Boolean),ew=ei.value.trim().toLowerCase().split(' ').filter(Boolean);filteredResults=fup.filter(p=>iw.every(w=>p.toLowerCase().includes(w))&&!ew.some(w=>p.toLowerCase().includes(w)));cd.innerHTML=`<ul style="list-style:none;padding:0;font-size:14px;line-height:1.8;">${filteredResults.length>0?filteredResults.map(p=>`<li class="scanning-list-item">${p}</li>`).join(''):'<li>No results available.</li>'}</ul><p style="color:#555;">Try modifying your search or exclusion terms.</p>`;updateUrlCount(filteredResults);reattachClickListeners();};const reattachClickListeners=()=>{document.querySelectorAll('.scanning-list-item').forEach(item=>{item.removeEventListener('click',clickHandler);item.addEventListener('click',clickHandler);});};const clickHandler=(e)=>{const url=e.target.textContent.trim();openUrlInNewTab(url);};const openUrlInNewTab=(url)=>{try{const currentDomain=window.location.hostname,currentProtocol=window.location.protocol;let completeUrl;if(!url||typeof url!=='string'){console.error("Invalid URL: ",url);return;}if(url.startsWith("//")){completeUrl=currentProtocol+url;}else if(url.startsWith("/")){completeUrl=currentProtocol+"//"+currentDomain+url;}else if(url.startsWith("./")||url.startsWith("../")){completeUrl=currentProtocol+"//"+currentDomain+"/"+url;}else{completeUrl=url.startsWith("http")?url:currentProtocol+"//"+currentDomain+"/"+url;}const validUrl=new URL(completeUrl);window.open(validUrl.href,'_blank');}catch(error){console.error("Error opening URL:",error);}};si.addEventListener('input',fl);ei.addEventListener('input',fl);const ss=document.createElement("style");ss.type="text/css";ss.innerText=`.scanning-list-item{padding:8px 0;color:#007bff;word-wrap:break-word;transition:background-color 0.3s ease,color 0.3s ease;}.scanning-list-item:hover{background-color:#f0f8ff;color:#0056b3;cursor:pointer;}`;document.head.appendChild(ss);const dr=()=>{const fn='output_filtered.txt';const blob=new Blob([filteredResults.join('\n')],{type:'text/plain'});const url=URL.createObjectURL(blob);const l=document.createElement('a');l.href=url;l.download=fn;l.click();URL.revokeObjectURL(url);};const db=document.createElement('button');db.textContent='Download Results';db.style.cssText='margin-top:20px;padding:10px 20px;background-color:#007bff;color:#fff;border:none;border-radius:8px;cursor:pointer';db.addEventListener('click',dr);d.appendChild(db);const opnAll=document.createElement('button');opnAll.textContent='Open All URLs in New Tabs';opnAll.style.cssText='margin-top:20px;padding:10px 20px;background-color:#007bff;color:#fff;border:none;border-radius:8px;cursor:pointer;margin-left:20px';opnAll.addEventListener('click',()=>{filteredResults.forEach(url=>openUrlInNewTab(url));});d.appendChild(opnAll);const ucd=document.createElement('span');ucd.textContent=`${fup.length} URL(s) available`;ucd.style.cssText='margin-left:20px;font-size:14px;color:#555';d.appendChild(ucd);reattachClickListeners();let id=false,ox,oy;h.addEventListener('mousedown',(e)=>{id=true;ox=e.clientX-d.offsetLeft;oy=e.clientY-d.offsetTop;document.body.style.userSelect='none';});document.addEventListener('mousemove',(e)=>{if(id){d.style.left=`${e.clientX-ox}px`;d.style.top=`${e.clientY-oy}px`;}});document.addEventListener('mouseup',()=>{id=false;document.body.style.userSelect='';});})();
